# Bunをベースイメージとして使用
FROM oven/bun:1-alpine

WORKDIR /app

# 依存関係のインストール
COPY package.json ./
RUN bun install --production

# ソースコードをコピー
COPY tsconfig.node.json ./
COPY server ./server

# ポートを公開
EXPOSE 3003

# 起動コマンド（常にWeb APIモードで実行）
CMD ["bun", "server/index.ts", "--web"]